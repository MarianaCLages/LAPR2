@startuml
autonumber
'hide footbox
actor "Administrator" as Administrator

participant ":CreateParameterUI" as UI
participant ":CreateParameterController" as CTRL
participant ":Company" as COMPANY
participant ":ParameterStore" as PARAMETERSTORE
participant ":ParameterCategoryStore" as CATEGORYSTORE
participant ":Parameter" as PARAMETER
participant ":ParameterCategory" as CATEGORY


activate Administrator
Administrator -> UI: asks to create a new task
activate UI
UI --> Administrator :requests ParameterData (code, description, NHSid)
deactivate UI


Administrator -> UI : types requested data
activate UI

activate CATEGORYSTORE
CATEGORYSTORE -> UI : Category list Data
UI -> Administrator : Show Category list and ask to select one
deactivate UI

Administrator -> PARAMETER : selects a parameter category



CTRL -> PLAT : lc=getTaskCategories()
activate PLAT

deactivate PLAT
deactivate CTRL

UI --> ADM : shows task categories list and ask to select one
deactivate PLAT
deactivate UI

ADM -> UI : selects a task category
activate UI

UI -> CTRL : createTask(ref,designation,informalDesc,technicalDesc,duration,cost,categoryId)
activate CTRL

CTRL -> PLAT : cat=getCategoryById(categoryId)
activate PLAT
|||
deactivate PLAT

CTRL -> _APP: app = getInstance()
activate _APP
|||
deactivate _APP

CTRL -> APP: session = getCurrentSession()
activate APP
|||
deactivate APP

CTRL -> SESSAO: email = getUserEmail()
activate SESSAO
|||
deactivate SESSAO

CTRL -> PLAT: org = getOrganizationByUserEmail(email)
activate PLAT
|||
deactivate PLAT

CTRL -> ORG: task=createTask(ref,designation,informalDesc,technicalDesc,duration,cost,cat)
activate ORG

ORG --> TAREFA**: create(ref,designation,informalDesc,technicalDesc,duration,cost,cat)
ORG -> ORG: validateTask(task)

CTRL --> UI: result

UI --> ADM: shows all data and requests confirmation
deactivate ORG
deactivate PLAT
deactivate CTRL
deactivate UI

ADM -> UI : confirms the data
activate UI
UI -> CTRL : saveTask()
activate CTRL

CTRL -> ORG : saveTask(task)
activate ORG

ORG -> ORG: validateTask(task)
ORG -> ORG: addTask(task)

CTRL --> UI: result

UI --> ADM : informs operation success
deactivate ORG
deactivate CTRL
deactivate UI

deactivate ADM

@enduml