@startuml
autonumber
actor Administrator as A
participant ":CreateTestTypeUI" as UI
participant ":CreateTestTypeController" as CTRL
participant ":Company" as C
participant "listCat: List<ParameterCategory>" as listCat
participant "tType:TestTypeStore" as STO
participant "t:Test Type" as T
participant "store: ParameterCategoryStore" as CAT

activate A
A -> UI: wants to specify a new type of test
activate UI
UI --> A: requests data (testID, collectingMethod, description)
deactivate UI
A -> UI: types requested data
activate UI
UI -> CTRL: CreateTestType(testID, collectingMethod, description)
activate CTRL
CTRL -> C: CreateTestType(testID, collectingMethod, description)
activate C
C -> STO: t = Create(testID, collectingMethod, description)
activate STO
STO--> T**: t = Create(testID, collectingMethod, description)

deactivate STO
deactivate C
deactivate CTRL

UI -> CTRL: createListCat()
activate CTRL
CTRL -> STO: createListCat()
activate STO
STO --> listCat**: create()
deactivate STO
deactivate CTRL

UI -> CTRL: getParameterCategoryStore()
activate CTRL
CTRL -> CAT : cat = getParameterCategoryStore()()
activate CAT
deactivate CAT
deactivate CTRL


UI --> A: shows parameter category list and asks to choose parameter category

deactivate UI
loop "More categories"
A -> UI: confirms the category
activate UI

UI -> CTRL: add(pc)
activate CTRL
CTRL->listCat: add(pc)
activate listCat
deactivate listCat
deactivate listCat
deactivate CTRL
end


UI ->CTRL: validateTestType(t)
activate CTRL
CTRL -> STO: validateTestType(t)
activate STO
STO -> T : validate()
activate T
deactivate T
deactivate STO
deactivate CTRL

UI --> A: shows all data and requestes confirmation
deactivate UI

A -> UI: confirms the data
activate UI




UI-> CTRL : saveTestType()
activate CTRL
CTRL -> STO: saveTestType(t)
activate STO
STO -> STO : validateTestType(t)
activate STO
deactivate STO
STO -> STO : saveTestType(t)
activate STO
deactivate STO
deactivate STO
UI --> A: informs operation success
deactivate UI
deactivate A


@enduml
