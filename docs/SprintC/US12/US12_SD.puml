@startuml
autonumber
actor "Clinical Chemistry Technologist" as cct
participant ":RecordResultsUI" as UI
participant ":RecordResultsController" as ctrl
participant ":Test" as Test

activate cct
cct -> UI: Asks for record the results of a given test
activate UI
UI --> cct: Asks for the code of the sample
deactivate UI
cct -> UI: Inserts the sample ID
activate UI
UI -> ctrl: SD_getTestParameterList(sampleId)
ref over ctrl: SD_AddTestResult(parameterCode,result,metric)
activate ctrl
ctrl --> UI: tpStoreDTO
deactivate ctrl
loop for all the parameters
    UI --> cct: Show parameters and asks to choose one
    deactivate UI
    cct -> UI: Choose parameter
    activate UI
    UI -> cct: Asks for results value and metric
    deactivate UI
    cct -> UI: Types results value and metric
    activate UI

    UI -> ctrl: addTestResult(parameterCode,result,metric)
    activate ctrl
    ctrl -> Test: addTestResult(parameterCode,result,metric)
    activate Test
    ref over Test : SD_AddTestResult(parameterCode,result,metric)
    Test --> ctrl : ok
    deactivate Test
    ctrl --> UI: ok
    deactivate ctrl


end

UI --> cct: Show all data and request confirmation
deactivate UI
cct -> UI: confirms the operation
activate UI
UI --> cct: Show success



@enduml